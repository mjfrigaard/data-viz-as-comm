---
title: "Data Visualization as Communication"
subtitle: "BioMarin Meetup: Advanced graphing techniques with ggplot2"
comment: "*using graphs to effectively share ideas*"
date: '`r Sys.Date()`'
author: 
  - "Martin Frigaard"
output:
  xaringan::moon_reader:
    css: xaringan-themer.css
    nature:
      highlightStyle: github
      highlightLines: true
---

```{r setup, include=FALSE}
library(tidyverse)
library(reprex)
library(xaringan)
library(pagedown)
library(xaringanthemer)
# folders
folders <- c("code", "data", "img", "pdfs")
purrr::map(.x = folders, .f = fs::dir_create)
knitr::opts_chunk$set(warning = FALSE, 
                      message = FALSE, 
                      fig.align = "center", 
                      dpi = 320, 
                      fig.height = 4, 
                      fig.path = "img/")
options(width = 60, max.print = 60)
```

```{r xaringan-themer-and-xaringan-inf_mr(), include=FALSE, warning=FALSE}
xaringanthemer::style_duo_accent(primary_color = "#035AA6", secondary_color = "#03A696")
# xaringan::inf_mr() # use for instant knitting and reviewing
```

class: inverse, center, top
background-image: url(img/ggplot2.png)
background-position: 50% 70%
background-size: 35%

# `ggplot2` = a grammar for data visualization

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

# Load the packages 

<br><br><br><br>

```{r packages, eval=FALSE}
install.packages("tidyverse")
library(tidyverse)
```

```{r pckgs, echo=FALSE, message=FALSE, warning=FALSE}
library(tidyverse)
```


---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

## Objectives

### Recognize the needs of your audience 

#### *level of data literacy, subject matter expertise, etc.*

### Check and communicate data quality with stakeholders  

#### *let them know the good and the bad news*

### Identify the correct data visualization (based on the data)

#### *single variable, bivariate, and multivariate graphs*

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

## Objectives (cont)

<br>

### Incorporate feedback from stakeholders/audience into graphs  

#### *ask them to be part of the process*

### Design visualizations with the appropriate detail and annotations

####  *inform (and do not mislead) the audience*

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

# Materials

## Slides 

## Exercises 

## RStudio Project

---
class: inverse, center, top
background-image: url(img/ggplot2.png)
background-position: 50% 70%
background-size: 35%

# Recap of `ggplot2` 

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

# Recap of `ggplot2`

## In the previous lesson, we covered: 

### 1) The grammar of graphics

- `ggplot2` is a language of *layers*, organized linearly 

--

- `ggplot2`'s layers give us a "*linear ordering of phrases*" to build an infinite number of graphs "*which convey a gnarly network of ideas.*" 

--

- "**Infinitely extensible**"

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

# Recap of `ggplot2` (cont)

## In the previous lesson, we covered:

### 2) Identifying graph aesthetics 

--

- position (`x` and `y`), size, color, shape, etc.

--

<br>

```{r graph-elements, echo=FALSE, out.width='100%', out.height='100%'}
knitr::include_graphics(path = "img/graph-elements.png")
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

# Recap of `ggplot2` (cont)

## In the previous lesson, we covered:

### 3) Recognizing and using `geoms`

<br>

--

- Scatter plot = `geom_point()`

--

- Box plot = `geom_boxplot()`

--

- Line graph = `geom_line()`  

--

- Bar graph = `geom_histogram()`, `geom_bar()`, `geom_col()`


---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

# Recap of `ggplot2` (cont)

## In the previous lesson, we covered:

### 4) Labels and factes (exercises)

- **Build labels first!** 

```{r labs_object, eval=FALSE}
ggplot2::labs(x = , y = , 
              title = , subtitle = , 
              caption = , tag = ) -> labs_object
```

--

- Facets show subplots for different levels of a grouping variable

- adjust `scales` argument

---
class: inverse, center, top
background-image: url(img/ggplot2.png)
background-position: 50% 70%
background-size: 35%

# Graphing preliminaries  

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

# Getting started 

### 1) Clearly define the question or problem

- Start with a general goal, broad question, or novel problem

- Move towards specific tasks 

--

### 2) Matching the measurements to metrics 

- *'Measurements'* are what we care about  

- *'Metrics'* are the available data

--

### 3) Is a data visualization the best choice?

- Not always...

---
class: inverse, center, top
background-image: url(img/ggplot2.png)
background-position: 50% 70%
background-size: 35%

# COVID and Transportation Habits 


---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 8% 94%
background-size: 8%

## Example: How has COVID changed our modes of transportation?

### What kind of measurements would this be?

***how people travel (walk, drive, etc.)***

--

### What would these data look like?

***what would the columns and rows look like?***

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

# Apple Mobility Data

## Fortunately, these data exist!

Apple released mobility data: 

https://covid19.apple.com/mobility

Import these data below: 

```{r import-AppleMobRaw}
AppleMobRaw <- readr::read_csv("https://bit.ly/apple-mob-raw")
```

*Use `Raw` as a prefix or suffix for data in it's most 'raw' state*

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

# Raw Apple Mobility Data

```{r AppleMobRaw-View, eval=FALSE}
AppleMobRaw %>% View("Apple")
```


```{r apple-mob-view, echo=FALSE, out.width='95%', out.height='95%'}
knitr::include_graphics(path = "img/apple-mob-view.png")
```

---
class: inverse, center, top
background-image: url(img/ggplot2.png)
background-position: 50% 70%
background-size: 35%

# Wrangling Apple Mobility Data 

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

## Wrangling Apple Mobility Data

--

<br>

### What variables do we have? 

--

### How are these variables formatted? 

--

### How do we need to change them? 

--

#### *...with a focus on answering our question*



---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

## View Apple Mobility Data (head)

```{r AppleMobRaw-head, eval=FALSE}
AppleMobRaw %>% head()
```

```{r AppleMobRaw-head-show, echo=FALSE}
rmarkdown::paged_table(AppleMobRaw %>% head())
```


---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

## View Apple Mobility Data (tail)

```{r AppleMobRaw-tail, eval=FALSE}
AppleMobRaw %>% tail()
```

```{r AppleMobRaw-tail-show, echo=FALSE}
rmarkdown::paged_table(AppleMobRaw %>% tail())
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 8% 94%
background-size: 8%

### Tidying Apple Mobility Data 

Tidy dates and mobility into `date` and `dir_request` ('relative usage of directions')

```{r tidying-no-show, eval=FALSE}
AppleMobRaw %>% 
  tidyr::pivot_longer(cols = -c(geo_type:country), 
    names_to = "date", values_to = "dir_request")
```

```{r tidying-show, echo=FALSE}
rmarkdown::paged_table(AppleMobRaw %>% 
  tidyr::pivot_longer(
    cols = -c(geo_type:country), 
    names_to = "date", 
    values_to = "dir_request"))
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

### Manipulate Apple Mobility Data

Remove missing values in `country` and `sub-region` and `clean_names()`

```{r wrangle-no-show, eval=FALSE}
AppleMobRaw %>% 
  tidyr::pivot_longer(cols = -c(geo_type:country), 
    names_to = "date", values_to = "dir_request") %>% 
  # remove missing country data
  dplyr::filter(!is.na(country) & !is.na(`sub-region`)) %>% 
  # clean names
  janitor::clean_names() %>% View("TidyApple")
```

```{r wrangle-show, echo=FALSE, eval=FALSE}
AppleMobRaw %>% 
  tidyr::pivot_longer(cols = -c(geo_type:country), 
    names_to = "date", values_to = "dir_request") %>% 
  # remove missing country data
  dplyr::filter(!is.na(country) & !is.na(`sub-region`)) %>% 
  # clean names
  janitor::clean_names() %>% View("TidyApple")
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

### New Tidy Apple Mobility Data!

```{r apple-tidy-view.png, echo=FALSE, out.width='80%', out.height='80%'}
knitr::include_graphics(path = "img/apple-tidy-view.png")
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

### Assign Apple Mobility Data to `TidyApple`

This looks good, so assign to `TidyApple`

```{r wrangle-assign-show, eval=FALSE}
AppleMobRaw %>% 
  tidyr::pivot_longer(cols = -c(geo_type:country), 
    names_to = "date", values_to = "dir_request") %>% 
  # remove missing country data
  dplyr::filter(!is.na(country) & !is.na(`sub-region`)) %>% 
  # clean names
  janitor::clean_names() -> TidyApple
```

```{r wrangle-assign-no-show, echo=FALSE}
AppleMobRaw %>% 
  tidyr::pivot_longer(cols = -c(geo_type:country), 
    names_to = "date", values_to = "dir_request") %>% 
  # remove missing country data
  dplyr::filter(!is.na(country) & !is.na(`sub-region`)) %>% 
  # clean names
  janitor::clean_names() -> TidyApple
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

### `TidyApple`: Format Variables

Our `TidyApple` data still needs some attention. 

```{r glimpse-TidyApple}
glimpse(TidyApple)
```

The `date` variable needs to be formatted as a `date`

```{r format-date}
TidyApple %>% 
  mutate(date = lubridate::ymd(date)) -> TidyApple
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

### `TidyApple`: Rename Variables

Let's rename `transportation_type` to `trans_type`

```{r rename}
TidyApple %>% 
  rename(trans_type = transportation_type) -> TidyApple
```


---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

### `TidyApple`: Check Formatted Variables

Re-check `TidyApple` data.

```{r recheck-glimpse-TidyApple}
glimpse(TidyApple)
```

Now we can see `date` is formatted correctly

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

### `TidyApple`: Counting

> “*data science is mostly counting things*” - `tabyl` vignette

Count the `trans_type` variable with `dplyr::count()`

.pull-left[

<br>

```{r count}
TidyApple %>% 
  count(trans_type)
```

]

.pull-right[

*Add the `sort = TRUE` argument*

```{r count-sort}
TidyApple %>% 
  count(trans_type, sort = TRUE)
```

]

---
class: inverse, center, top
background-image: url(img/ggplot2.png)
background-position: 50% 70%
background-size: 35%

# Visualizing Variable Distributions

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

## `TidyApple`: Visualizing variable distributions

What is the distribution of `dir_request`? We will explore this with a histogram.

### Labels!!

```{r lab_hist}
lab_hist <- labs(x = "Apple directions requests",
                 y = "Count",
     title = "Distribution of Direction Requests",
     subtitle = "source: https://covid19.apple.com/mobility")
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 8% 95%
background-size: 8%

## Histogram = single variable distributions

Create a histogram of `dir_request` with the code below:

```{r geom-hist-no-show, eval=FALSE}
TidyApple %>% ggplot() + 
  geom_histogram(aes(x = dir_request)) + #<<
  lab_hist
```

```{r geom-hist-1-show, echo=FALSE, out.height='60%', out.width='60%'}
knitr::include_graphics(path = "img/geom-hist-1.png")
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

## Histograms: Changing the Y Axis

Fix the `y` axis numbers with help from the [`scales` package](https://scales.r-lib.org/)

```{r geom-hist-scales-show, eval=FALSE}
library(scales)
TidyApple %>% ggplot() + 
  geom_histogram(aes(x = dir_request)) + 
  scale_y_continuous(labels = scales::comma) + #<<
  lab_hist
```

```{r geom-hist-scales, echo=FALSE, message=FALSE, warning=FALSE, include=FALSE}
library(scales)
TidyApple %>% ggplot() + 
  geom_histogram(aes(x = dir_request)) + 
  scale_y_continuous(labels = scales::comma) +
  lab_hist
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

## Histograms: Changing the Y Axis

<br>

```{r geom-hist-scales-1-show, echo=FALSE, out.height='90%', out.width='90%'}
knitr::include_graphics(path = "img/geom-hist-scales-1.png")
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

## Changing Histogram Shape

Adjust the shape of the histogram with the `bins` argument

```{r bins-15-show, eval=FALSE}
TidyApple %>% ggplot() + 
  geom_histogram(aes(x = dir_request), bins = 15) + #<<
  scale_y_continuous(labels = scales::comma) +
  lab_hist
```

```{r bins-15-no-show, include=FALSE}
TidyApple %>% ggplot() + 
  geom_histogram(aes(x = dir_request), bins = 15) + 
  scale_y_continuous(labels = scales::comma) +
  lab_hist
```

```{r bins-15-no-show-1-show, echo=FALSE, out.height='75%', out.width='75%'}
knitr::include_graphics(path = "img/bins-15-no-show-1.png")
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

## Changing Histogram Shape

Adjust the shape of the histogram with the `bins` argument

```{r bins-45-show, eval=FALSE}
TidyApple %>% ggplot() + 
  geom_histogram(aes(x = dir_request), bins = 45) + #<<
  scale_y_continuous(labels = scales::comma) +
  lab_hist
```

```{r bins-45-no-show, include=FALSE}
TidyApple %>% ggplot() + 
  geom_histogram(aes(x = dir_request), bins = 45) + 
  scale_y_continuous(labels = scales::comma) +
  lab_hist
```

```{r bins-45-no-show-1-show, echo=FALSE, out.height='75%', out.width='75%'}
knitr::include_graphics(path = "img/bins-45-no-show-1.png")
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 8% 95%
background-size: 6%

## Visualizing variable distributions across groups

What is the distribution of `dir_request` across `trans_type`? 

### We can view this with a density plot

### CREATE LABELS FIRST!! 

We need a new set of labels 

```{r labs_density}
lab_density <- labs(x = "Apple directions requests",
                    y = "Density",
     title = "Direction Requests vs. Transportation Type",
     subtitle = "source: https://covid19.apple.com/mobility")
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

## Density Plots

Visualize the distribution of `dir_request` across `trans_type` with a `geom_density()`

```{r density, eval=FALSE}
TidyApple %>% 
  ggplot() +
  geom_density(aes(x = dir_request, #<<
                   fill = trans_type)) + #<<
  lab_density
```

```{r density-no-show, include=FALSE}
TidyApple %>% 
  ggplot() +
  geom_density(aes(x = dir_request, 
                   fill = trans_type)) + 
  lab_density
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

## Density Plots

```{r density-no-show-1-show, echo=FALSE, out.height='85%', out.width='85%'}
knitr::include_graphics(path = "img/density-no-show-1.png")
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

## Density Plots (`alpha`)

<br>

Adjust the `alpha` so we can see the overlap

```{r density-alpha, eval=FALSE}
TidyApple %>% 
  ggplot() +
  geom_density(aes(x = dir_request, 
                   fill = trans_type), 
               alpha = 1/3) + #<<
  lab_density
```

```{r density-alpha-no-show, include=FALSE}
TidyApple %>% 
  ggplot() +
  geom_density(aes(x = dir_request, 
                   fill = trans_type), 
               alpha = 1/3) + 
  lab_density
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

## Density Plots (`alpha`)

Now we can see where they overlap

```{r density-alpha-no-show-1-show, echo=FALSE, out.height='85%', out.width='85%'}
knitr::include_graphics(path = "img/density-alpha-no-show-1.png")
```


---
class: inverse, center, top
background-image: url(img/ggplot2.png)
background-position: 50% 70%
background-size: 35%

# Visualizing Trends

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

### `TidyApple`: filtering dates

**How have direction requests changed over time in US cities?**

Filter the data to only us cities between `2020-02-01` and `2020-08-01`. Use `skimr::skim()` to make sure it works!

```{r filter-us-cities, eval=FALSE}
TidyApple %>% 
  filter(geo_type == "city" &
         country == "United States", 
         date >= lubridate::as_date("2020-02-01") & 
         date <= lubridate::as_date("2020-08-01")) %>% 
         # check work!
         skimr::skim(date)
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

### `TidyAppleFilter`: filtered dates

These are helpful if we're checking a filter on a numerical certain condition (`min`, `max`, `mean`, etc.)

```{r skimr-output-png, echo=FALSE, out.height='75%', out.width='75%', fig.align='left'}
knitr::include_graphics(path = "img/skimr-output.png")
```

```{r TidyAppleFilter}
TidyApple %>% 
  filter(geo_type == "city" &
         country == "United States", 
         date >= lubridate::as_date("2020-02-01") & 
         date <= lubridate::as_date("2020-08-01")) -> TidyAppleFilter
```



---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

### `TidyAppleFilter`: plot with filtered dates

Ideally our labels update when the data changes. We can do this with `paste0()`.

```{r lab_line_graph}
labs(x = "Date",
     y = "Direction Requests",
     title = "Direction Requests Over Time (US Cities Only)",
     subtitle = paste0(min(TidyAppleFilter$date), #<<
                       " through ", #<<
                       max(TidyAppleFilter$date)), #<<
     caption = "source: https://covid19.apple.com/mobility", 
     color = "Transit Type") -> lab_line_graph
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

### `TidyAppleFilter`: plot with filtered dates

```{r apply-lab_line_graph, eval=FALSE}
TidyAppleFilter %>% 
  ggplot() +
  geom_line(aes(x = date, y = dir_request, 
             group = trans_type, color = trans_type)) + 
  lab_line_graph #<<
```

```{r sapply-lab_line_graph-show, echo=FALSE, out.height='85%', out.width='85%', fig.align='center'}
knitr::include_graphics(path = "img/apply-lab_line_graph-show.png")
```

---
class: inverse, center, top
background-image: url(img/ggplot2.png)
background-position: 50% 70%
background-size: 35%

# Labeling Values 

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

### `TidyApple`: Labeling Values

In the previous slides, we learned about labeling values with `ggrepel`.

```{r aes-sol-11-1, echo=FALSE, fig.align='center', out.height='65%', out.width='65%'}
knitr::include_graphics(path = "img/aes-sol-11-1.png")
```

Now we're going to extend this to only plotting specific values as labels on the graph.

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

### Create `TopUSCities`

Filter `TidyApple` to the largest US cities (by population).

```{r TopUSCities-no-show}
TopUSCities <- TidyApple %>% 
  filter(country == "United States" & 
           region %in% c("New York City","Los Angeles", 
                         "Chicago", "Houston", "Phoenix")) 
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

### View `TopUSCities`

```{r view-TopUSCities, eval=FALSE}
TopUSCities
```

```{r TopUSCities-show, echo=FALSE}
TopUSCities <- TidyApple %>% 
  filter(country == "United States" & 
           region %in% c("New York City","Los Angeles", 
                         "Chicago", "Houston", "Phoenix"))
rmarkdown::paged_table(TopUSCities)
```


---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

## Create `MaxUSCitiesDriving` 

Create a dataset with only the maximum direction request values for `"driving"` per `region`. 

```{r MaxUSCitiesDriving, eval=FALSE}
TopUSCities %>% 
  filter(trans_type == "driving") %>% 
  group_by(region) %>% 
  slice_max(dir_request) -> MaxUSCitiesDriving
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

## View `MaxUSCitiesDriving`

```{r view-MaxUSCitiesDriving, eval=FALSE}
MaxUSCitiesDriving
```

```{r MaxUSCitiesDriving-no-show, echo=FALSE}
rmarkdown::paged_table(MaxUSCitiesDriving)
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

### Create graph labels 

We know we want to see the max direction requests labeled, so we will update the labels for the graph.

```{r lab_line_max_drivers}
lab_line_max_drivers <- labs(
 x = "Date",
 y = "Direction Requests",
 title = "Peak Driving Direction Requests in Largest US Cities",
 subtitle = "Max Driving Direction Requests & Date",
 caption = "source: https://covid19.apple.com/mobility", 
 color = "Transit Type")
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

### Create value labels 

We will also use `paste0()` here to create a variable for the labels that combines the city and date. 

```{r max_driving_labels-sol-01}
MaxUSCitiesDriving <- MaxUSCitiesDriving %>% 
  mutate(max_driving_labels = paste0(region, ", ", date))
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

### View value labels 

```{r view-max_driving_labels, eval=FALSE}
MaxUSCitiesDriving
```

```{r max_driving_labels-show, echo=FALSE}
rmarkdown::paged_table(
MaxUSCitiesDriving)
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

### Create plot with labels

```{r plot-with-labels-show, eval=FALSE}
library(ggrepel)
TopUSCities %>% 
    ggplot() + 
    geom_line(aes(x = date, y = dir_request, 
                  group = trans_type, 
                  color = trans_type), 
                  # make these slightly smaller again...
                  size = 0.15) + 
    geom_label_repel(data = MaxUSCitiesDriving,
              aes(x = date, y = dir_request, 
                  label = max_driving_labels), 
                  # set color and size...
                  color = "red", 
                  size = 3) + 
  lab_line_max_drivers
```

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

### View plot with labels

```{r plot-with-labels-no-show, include=FALSE}
library(ggrepel)
TopUSCities %>% 
    ggplot() + 
    geom_line(aes(x = date, y = dir_request, 
                  group = trans_type, 
                  color = trans_type), 
                  # make these slightly smaller again...
                  size = 0.15) + 
    geom_label_repel(data = MaxUSCitiesDriving,
              aes(x = date, y = dir_request, 
                  label = max_driving_labels), 
                  # set color and size...
                  color = "red", 
                  size = 3) + 
  lab_line_max_drivers
```

```{r plot-with-labels-no-show-1, echo=FALSE, fig.align='center', out.height='100%', out.width='100%'}
knitr::include_graphics(path = "img/plot-with-labels-no-show-1.png")
```

---
class: inverse, center, top
background-image: url(img/ggplot2.png)
background-position: 50% 70%
background-size: 35%

# Advanced Facetting 

---
class: left, top
background-image: url(img/ggplot2.png)
background-position: 95% 8%
background-size: 8%

# Facets




```{r SPYvsSPY, eval=FALSE, echo=FALSE}
library(SPYvsSPY)
SPYvsSPY::svs %>% 
  select(yrmo, white_comeuppance, black_comeuppance)
```
